{% extends "base.html" %}
{% block content %}
  <div class="stats">
    <div class="stat"><div class="stat__label">Пользователи</div><div class="stat__value">{{ counts.users }}</div></div>
    <div class="stat"><div class="stat__label">Админы</div><div class="stat__value">{{ counts.admins }}</div></div>
    <div class="stat"><div class="stat__label">Посты</div><div class="stat__value">{{ counts.posts }}</div></div>
    <div class="stat"><div class="stat__label">Вебинары</div><div class="stat__value">{{ counts.webinars }}</div></div>
    <div class="stat"><div class="stat__label">Записи</div><div class="stat__value">{{ counts.bookings }}</div></div>
    <div class="stat"><div class="stat__label">Рефералы</div><div class="stat__value">{{ counts.referrals }}</div></div>
  </div>

  <div class="grid">
    <div class="card">
      <h2>Полная очистка</h2>
      <div class="muted">Удаляет все таблицы (SQLite: DELETE, Postgres: TRUNCATE CASCADE).</div>
      <form method="post" action="/admin/data/clear-db" data-confirm="ТОЧНО удалить ВСЕ данные?">
        <button class="btn danger" type="submit" style="margin-top:var(--ds-spacing-lg)">Удалить ВСЕ данные</button>
      </form>
    </div>

    <div class="card">
      <h2>Выборочное удаление</h2>
      <div class="muted">Выбери таблицы и нажми “Удалить выбранное”.</div>
      <form method="post" action="/admin/data/clear-selected" style="margin-top:var(--ds-spacing-lg)" data-confirm="Удалить выбранные данные?">
        <div class="field">
          <label>Таблицы</label>
          <select name="targets" multiple size="10" class="ds-select">
            {% for t in tables %}
              <option value="{{ t }}">{{ t }}</option>
            {% endfor %}
          </select>
        </div>
        <button class="btn danger" type="submit">Удалить выбранное</button>
      </form>
    </div>
  </div>
{% endblock %}

