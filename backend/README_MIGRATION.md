# Исправление структуры базы данных

## Проблема

Если вы видите ошибки типа:
- `no such column: users.last_name`
- `no such column: bookings.webinar_id`

Это означает, что база данных была создана со старыми моделями, а модели были обновлены.

## Решение

### Автоматическое исправление

**Windows:**
```bash
cd backend
fix_database.bat
```

**Linux/Mac:**
```bash
cd backend
chmod +x fix_database.sh
./fix_database.sh
```

### Ручное исправление

```bash
cd backend
python migrate_db.py
```

Скрипт автоматически:
1. Создаст резервную копию базы данных (`db.sqlite3.backup`)
2. Добавит отсутствующие колонки в таблицы
3. Обновит структуру базы данных

## Пересоздание базы данных

Если миграция не помогла, можно пересоздать базу данных (⚠ **все данные будут удалены**):

```bash
cd backend
python migrate_db.py --recreate
```

После этого база данных будет создана заново при следующем запуске сервера.

## Проверка

После миграции проверьте работу API:

```bash
python test_api_simple.py
```

Все тесты должны пройти успешно.

